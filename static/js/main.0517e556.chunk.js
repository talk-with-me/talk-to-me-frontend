(this["webpackJsonptalk-to-me-frontend"]=this["webpackJsonptalk-to-me-frontend"]||[]).push([[0],{107:function(e,t,n){},110:function(e,t,n){},161:function(e,t){},164:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(8),i=n.n(c),s=(n(107),n(15)),r=n(190),l=a.a.createContext(),d=n(87),p=n(24),u=n(10),b=(n(110),n(9)),f=n(2),x=Object(r.a)((function(e){var t,n;return{content:Object(b.a)({padding:"80px","font-weight":"bold","font-size":"32pt"},e.breakpoints.down("xs"),{"padding-top":"30px",padding:"20px"}),welcomeTitle:(t={color:"#ffa740",width:"100%","text-align":"center","font-size":"48pt"},Object(b.a)(t,e.breakpoints.down("sm"),{"font-size":"36pt"}),Object(b.a)(t,e.breakpoints.down("xs"),{"font-size":"24pt"}),t),welcomeMessage:(n={color:"#f74a61","text-align":"center","padding-top":"20px","font-size":"24pt","font-weight":"500",width:"100%",margin:"auto"},Object(b.a)(n,e.breakpoints.up("md"),{"padding-top":"40px",width:"900px"}),Object(b.a)(n,e.breakpoints.down("sm"),{"font-size":"20pt"}),Object(b.a)(n,e.breakpoints.down("xs"),{"font-size":"16pt"}),n)}}));var g=function(){var e=x();return Object(f.jsxs)("div",{className:e.content,children:[Object(f.jsx)("div",{className:e.welcomeTitle,children:"Welcome to Talk To Me"}),Object(f.jsx)("div",{className:e.welcomeMessage,children:"A wholesome, anonymous chat service."}),Object(f.jsx)("div",{className:e.welcomeMessage,children:"Pardon the dust, our website is under construction!"})]})},j=n(195),h=n(197),m=n(90),O=n.n(m),w=n(191),v=n(43),k=n.n(v),y=n(196),N=Object(r.a)((function(e){var t;return{"@keyframes fadeIn":{"0%":{opacity:0,transform:"translateY(-100%)"},"50%":{opacity:0,transform:"translateY(-100%)"},"100%":{opacity:1,transform:"translateY(0%)"}},root:Object(b.a)({position:"relative",top:"-105px","flex-grow":"2",margin:"auto",display:"flex",animation:"$fadeIn ease 3000ms"},e.breakpoints.down("xs"),{"flex-direction":"column",width:"100%"}),backButton:{"margin-top":"10px","margin-right":"20px",height:"40px",width:"40px",color:"#f74a61"},backIcon:{height:"40px",width:"40px"},chatWindow:(t={width:"100%",background:"#FEFEFE",color:"#333","border-radius":"5px","font-weight":"bold","font-size":"32pt",display:"flex","flex-direction":"column","flex-grow":"1"},Object(b.a)(t,e.breakpoints.up("sm"),{width:"600px"}),Object(b.a)(t,e.breakpoints.down("xs"),{top:"-80px"}),t),messages:{flex:"1 1 auto",display:"flex","flex-direction":"column","font-size":"14pt",padding:"10px",overflow:"scroll",height:"100%","max-height":"100%"},myMessage:{margin:"4px",background:"#f74a61",display:"inline-flex","align-self":"flex-end",color:"white",padding:"12px","border-radius":"10px"},theirMessage:{margin:"4px",background:"#EEE",display:"inline-flex","align-self":"flex-start",color:"black",padding:"12px","border-radius":"10px"},disconnectMessage:{display:"inline-flex","align-self":"center",color:"#888",padding:"10px"},typingStatus:{"font-size":"14pt",padding:"5px",color:"#888"},inputBox:{padding:"5px"}}}));var _=function(e){var t=N();console.log(e);var n=e.messages,a=e.socket,c=Object(o.useState)(!1),i=Object(s.a)(c,2),r=i[0],l=i[1],d=Object(o.useState)(!1),u=Object(s.a)(d,2),b=u[0],x=u[1];Object(o.useEffect)((function(){a.on("user_disconnected",(function(){l(!0)})),a.on("partner_starts_typing",(function(){x(!0)})),a.on("partner_stops_typing",(function(){x(!1)}))})),Object(o.useEffect)((function(){return function(){a.disconnect()}}),[a]);var g=function(t){var n={user_id:e.user_id,secret:e.secret,typing:t};k.a.post(e.api_url+"/typing",n)},m=null;return Object(f.jsxs)("div",{className:t.root,children:[Object(f.jsx)(w.a,{className:t.backButton,component:p.b,onClick:function(){return e.socket.disconnect()},to:"/",children:Object(f.jsx)(O.a,{className:t.backIcon})}),Object(f.jsxs)(j.a,{className:t.chatWindow,children:[Object(f.jsxs)("div",{className:t.messages,children:[n.map((function(e){return Object(f.jsx)("div",{className:e.incoming?t.theirMessage:t.myMessage,children:e.content},e.id)})),r?Object(f.jsx)("div",{className:t.disconnectMessage,children:"Partner has disconnected"}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)("div",{className:t.typingStatus,hidden:!b,children:"Partner is typing..."}),Object(f.jsx)(h.a,{className:t.inputBox,placeholder:"Send a message!",variant:"outlined",onKeyDown:function(t){"Enter"===t.key?(console.log(t.target.value),function(t){var o={message_id:Object(y.a)(),user_id:e.user_id,secret:e.secret,content:t};console.log(o),e.setMessages(n.concat([o])),k.a.post(e.api_url+"/messages",o)}(t.target.value),g(!1),t.target.value=""):(null!=m?clearTimeout(m):g(!0),m=setTimeout((function(){g(!1),m=null}),2500))}})]})]})},M=n(91),z=n.n(M),S=Object(r.a)((function(e){return{root:{margin:"20px",color:"white","font-weight":"bold","font-size":"32pt",display:"flex","flex-direction":"column",height:"calc(100vh - 130px)"},title:{color:"#ffa740",width:"900px"},waitMessage:Object(b.a)({"padding-top":"45px",color:"#ffa740","text-align":"center","font-size":"32pt"},e.breakpoints.down("xs"),{"font-size":"20pt"})}})),T="https://api.talk-to-me.co";var E=function(){var e=S(),t=Object(o.useState)("in"),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(null),r=Object(s.a)(i,2),l=r[0],d=r[1],p=Object(o.useState)(null),u=Object(s.a)(p,2),b=u[0],x=u[1],g=Object(o.useState)([]),j=Object(s.a)(g,2),h=j[0],m=j[1],O=Object(o.useState)(null),w=Object(s.a)(O,2),v=w[0],y=w[1];return Object(o.useEffect)((function(){k.a.post(T+"/queue").then((function(e){y(z.a.connect(T,{origins:"http://localhost:8000",transports:["websocket"]})),d(e.data.data.id),x(e.data.data.secret),console.log(e.data.data.id,e.data.data.secret)}))}),[]),Object(o.useEffect)((function(){v&&b&&l&&(v.on("connect",(function(){v.emit("register_sid",b)})),v.on("queue_complete",(function(){console.log("queue complete"),v.emit("join_room",b),c("out")})),v.on("send_message_to_client",(function(e){m(h.concat([e]))})))}),[b,l,v,h]),Object(o.useEffect)((function(){console.log("rerendering with following messages:",h)}),[h]),Object(f.jsxs)("div",{className:e.root,children:["out"===a?Object(f.jsx)("div",{className:e.waitMessage,children:"Match found!"}):Object(f.jsx)("div",{className:e.waitMessage,children:"Finding the perfect match..."}),"out"===a?Object(f.jsx)(_,{messages:h,setMessages:m,user_id:l,secret:b,api_url:T,socket:v}):Object(f.jsx)("div",{})]})},B=n(194),C=n(92),I=n.n(C),F=n(193),P=Object(r.a)((function(e){return{root:{"font-family":"Roboto"},content:{padding:"20px",color:"white",background:"rgba(248,74,98,1)",height:"100%"},homeButton:{color:"white","font-size":"14pt",width:"100%",padding:"15px"},homeIcon:{height:"40px",width:"40px",color:"white","margin-right":"15px"}}}));var q=function(){var e=P(),t=a.a.useContext(l),n=t.sidebarOpen,o=t.setSidebarOpen;return Object(f.jsx)(B.a,{open:n,onClose:function(){return o(!1)},className:e.root,children:Object(f.jsx)("div",{className:e.content,children:Object(f.jsxs)(F.a,{className:e.homeButton,component:p.b,onClick:function(){return o(!1)},to:"/",children:[Object(f.jsx)(I.a,{className:e.homeIcon}),"Homepage"]})})})},L=n(93),R=n.n(L),W=Object(r.a)((function(e){return{root:{width:"100%",height:"70px",background:"radial-gradient(circle, rgba(254,131,67,1) 0%, rgba(248,74,98,1) 100%)","border-radius":"2px",color:"white","padding-top":"10px","padding-bottom":"10px",display:"flex","justify-content":"space-between"},title:{"margin-left":"20px",textTransform:"none",color:"white","font-weight":"900","font-size":"24pt"},menuButton:{"margin-left":"10px",display:"none"},menuIcon:{color:"white",height:"30px",width:"30px"},chatButton:{"font-family":"Roboto","margin-top":"14px","margin-right":"15px","border-radius":"30px",background:"rgba(254,131,67,1)",color:"white","font-size":"12pt","font-weight":"600",height:"40px",width:"120px","&:hover":{background:"rgba(254,131,67,1)"},textTransform:"none"}}}));var Y=function(){var e=W(),t=a.a.useContext(l).setSidebarOpen;return Object(f.jsxs)("div",{className:e.root,children:[Object(f.jsx)(F.a,{className:e.title,component:p.b,to:"/",children:"Talk To Me"}),Object(f.jsx)(w.a,{onClick:function(){return t(!0)},className:e.menuButton,children:Object(f.jsx)(R.a,{className:e.menuIcon})}),Object(f.jsx)(u.a,{path:"\\/([^c][^h][^a][^t].*|.{0,3})",children:Object(f.jsx)(F.a,{variant:"contained",className:e.chatButton,component:p.b,to:"/chat",children:"Let's Talk"})})]})},D=Object(r.a)((function(e){return{root:{"font-family":"Roboto"},menuIcon:{"font-size":"30pt","margin-top":"14px","margin-left":"10px",color:"white"},title:{textTransform:"none","padding-top":"5px",color:"white","font-weight":"900","font-size":"40pt"}}}));var J=function(){var e=D(),t=Object(o.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(!1),r=Object(s.a)(i,2),b=r[0],x=r[1];return Object(f.jsx)("div",{className:e.root,children:Object(f.jsxs)(l.Provider,{value:{sidebarOpen:a,setSidebarOpen:c,chatting:b,setChatting:x},children:[Object(f.jsx)(d.a,{children:Object(f.jsx)("title",{children:"Talk To Me"})}),Object(f.jsxs)(p.a,{children:[Object(f.jsx)(q,{}),Object(f.jsx)(Y,{}),Object(f.jsx)(u.a,{exact:!0,path:"/",children:Object(f.jsx)(g,{})}),Object(f.jsx)(u.a,{path:"/chat",children:Object(f.jsx)(E,{})})]})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),c(e),i(e)}))};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(J,{})}),document.getElementById("root")),A()}},[[164,1,2]]]);
//# sourceMappingURL=main.0517e556.chunk.js.map