(this["webpackJsonptalk-to-me-frontend"]=this["webpackJsonptalk-to-me-frontend"]||[]).push([[0],{107:function(e,t,n){},110:function(e,t,n){},155:function(e,t){},159:function(e,t,n){"use strict";n.r(t);var o=n(4),a=n(0),c=n.n(a),i=n(9),s=n.n(i),r=(n(107),n(22)),l=n(184),d=c.a.createContext(),u=n(89),p=n(28),b=n(8),h=(n(110),n(185)),j=Object(l.a)((function(e){return{content:{padding:"80px",color:"white","font-weight":"bold","font-size":"32pt"},welcomeTitle:{color:"#ffa740",width:"900px"},welcomeMessage:{"padding-top":"20px","font-size":"24pt",width:"900px"},chatButton:{"margin-top":"30px","border-radius":"30px",background:"rgba(254,131,67,1)",color:"white","font-size":"20pt","letter-spacing":"2px",height:"60px",width:"180px","&:hover":{background:"rgba(254,131,67,1)"}}}}));var g=function(){var e=j();return Object(o.jsxs)("div",{className:e.content,children:[Object(o.jsx)("div",{className:e.welcomeTitle,children:"Welcome to Talk To Me"}),Object(o.jsx)("div",{className:e.welcomeMessage,children:"The purpose of this site is to provide a wholesome, anonymous chat service with the aim of combating the loneliness of quarantine."}),Object(o.jsx)("div",{className:e.welcomeMessage,children:"We are currently under construction as our frontend is undergoing major changes, so stay tuned!"}),Object(o.jsx)(h.a,{variant:"contained",className:e.chatButton,component:p.b,to:"/chat",children:"Chat"})]})},x=n(189),f=n(190),m=n(52),O=n.n(m),w=n(191),v=Object(l.a)((function(e){return{root:{background:"#FEFEFE",color:"#333",width:"400px",height:"600px","border-radius":"5px","font-weight":"bold","font-size":"32pt",display:"flex","flex-direction":"column"},messages:{flex:"1 1 auto",display:"flex","flex-direction":"column","font-size":"14pt",padding:"10px",overflow:"scroll"},myMessage:{margin:"4px",background:"#361999",display:"inline-flex","align-self":"flex-end",color:"white",padding:"12px","border-radius":"10px"},theirMessage:{margin:"4px",background:"#DDD",display:"inline-flex","align-self":"flex-start",color:"black",padding:"12px","border-radius":"10px"},inputBox:{padding:"5px"}}}));var k=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=(n[0],n[1],v());console.log(e);var i=e.messages;return Object(o.jsxs)(x.a,{className:c.root,children:[Object(o.jsx)("div",{className:c.messages,children:i.map((function(e){return Object(o.jsx)("div",{className:e.incoming?c.theirMessage:c.myMessage,children:e.content},e.id)}))}),Object(o.jsx)(f.a,{className:c.inputBox,placeholder:"Send a message!",variant:"outlined",onKeyDown:function(t){"Enter"==t.key&&(console.log(t.target.value),function(t){var n={message_id:Object(w.a)(),user_id:e.user_id,secret:e.secret,content:t};console.log(n),e.setMessages(i.concat([n])),O.a.post(e.api_url+"/messages",n)}(t.target.value),t.target.value="")}})]})},N=n(92),y=n.n(N),M=Object(l.a)((function(e){return{root:{margin:"80px",color:"white","font-weight":"bold","font-size":"32pt"},title:{color:"#ffa740",width:"900px"},waitMessage:{}}})),T="https://api.talk-to-me.co";var S=function(){var e=M(),t=Object(a.useState)("in"),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(null),l=Object(r.a)(s,2),d=l[0],u=l[1],p=Object(a.useState)(null),b=Object(r.a)(p,2),h=b[0],j=b[1],g=Object(a.useState)([]),x=Object(r.a)(g,2),f=x[0],m=x[1],w=Object(a.useState)(null),v=Object(r.a)(w,2),N=v[0],S=v[1];return Object(a.useEffect)((function(){O.a.post(T+"/queue").then((function(e){S(y.a.connect(T,{origins:"http://localhost:8000",transports:["websocket"]})),u(e.data.data.id),j(e.data.data.secret),console.log(e.data.data.id,e.data.data.secret)}))}),[]),Object(a.useEffect)((function(){N&&h&&d&&(N.on("connect",(function(){N.emit("register_sid",h)})),N.on("queue_complete",(function(){console.log("queue complete"),N.emit("join_room",h),i("out")})),N.on("send_message_to_client",(function(e){m(f.concat([e]))})))}),[h,d,N,f]),Object(a.useEffect)((function(){console.log("rerendering with following messages:",f)}),[f]),Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)("div",{className:e.title,children:"Talk To Me"}),"out"===c?Object(o.jsx)(k,{messages:f,setMessages:m,user_id:d,secret:h,api_url:T}):Object(o.jsx)("div",{className:e.waitMessage,children:"You are now in queue..."})]})},_=n(188),z=n(93),B=n.n(z),C=Object(l.a)((function(e){return{root:{"font-family":"Roboto"},content:{padding:"20px",color:"white",background:"rgba(248,74,98,1)",height:"100%"},homeButton:{color:"white","font-size":"14pt",width:"100%",padding:"15px"},homeIcon:{height:"40px",width:"40px",color:"white","margin-right":"15px"}}}));var E=function(){var e=C(),t=c.a.useContext(d),n=t.sidebarOpen,a=t.setSidebarOpen;return Object(o.jsx)(_.a,{open:n,onClose:function(){return a(!1)},className:e.root,children:Object(o.jsx)("div",{className:e.content,children:Object(o.jsxs)(h.a,{className:e.homeButton,component:p.b,onClick:function(){return a(!1)},to:"/",children:[Object(o.jsx)(B.a,{className:e.homeIcon}),"Homepage"]})})})},F=n(61),I=n.n(F),q=n(187),D=Object(l.a)((function(e){return{root:{width:"100%",height:"70px",background:"radial-gradient(circle, rgba(254,131,67,1) 0%, rgba(248,74,98,1) 100%)","border-radius":"2px",color:"white","padding-top":"10px","padding-bottom":"10px",display:"flex","justify-content":"space-between"},title:{textTransform:"none","padding-top":"5px",color:"white","font-weight":"900","font-size":"40pt"},menuButton:{"margin-left":"10px"},menuIcon:{color:"white",height:"30px",width:"30px"}}}));var P=function(){var e=D(),t=c.a.useContext(d),n=(t.sidebarOpen,t.setSidebarOpen);return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(q.a,{onClick:function(){return n(!0)},className:e.menuButton,children:Object(o.jsx)(I.a,{className:e.menuIcon})}),Object(o.jsx)(h.a,{className:e.title,children:"Talk To Me"}),Object(o.jsx)("div",{})]})},J=Object(l.a)((function(e){return{root:{"font-family":"Roboto"},menuIcon:{"font-size":"30pt","margin-top":"14px","margin-left":"10px",color:"white"},title:{textTransform:"none","padding-top":"5px",color:"white","font-weight":"900","font-size":"40pt"}}}));var L=function(){var e=J(),t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],i=n[1];return Object(o.jsx)("div",{className:e.root,children:Object(o.jsxs)(d.Provider,{value:{sidebarOpen:c,setSidebarOpen:i},children:[Object(o.jsx)(u.a,{children:Object(o.jsx)("title",{children:"Talk To Me"})}),Object(o.jsxs)(p.a,{children:[Object(o.jsx)(E,{}),Object(o.jsx)(P,{}),Object(o.jsx)(b.a,{exact:!0,path:"/",children:Object(o.jsx)(g,{})}),Object(o.jsx)(b.a,{path:"/chat",children:Object(o.jsx)(S,{})})]})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),c(e),i(e)}))};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(L,{})}),document.getElementById("root")),R()}},[[159,1,2]]]);
//# sourceMappingURL=main.10c13e2c.chunk.js.map