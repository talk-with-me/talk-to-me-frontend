(this["webpackJsonptalk-to-me-frontend"]=this["webpackJsonptalk-to-me-frontend"]||[]).push([[0],{139:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(0),c=n.n(a),s=n(25),i=n.n(s),r=(n(91),n(163)),l=n(165),d=n(75),u=n(33),p=n(5),g=n(79),b=n.n(g),j=(n(94),Object(r.a)((function(e){return{content:{padding:"80px",color:"white","font-weight":"bold","font-size":"32pt"},welcomeTitle:{color:"#ffa740",width:"900px"},welcomeMessage:{"padding-top":"20px","font-size":"24pt",width:"900px"},chatButton:{"margin-top":"30px","border-radius":"30px",background:"rgba(254,131,67,1)",color:"white","font-size":"20pt","letter-spacing":"2px",height:"60px",width:"180px","&:hover":{background:"rgba(254,131,67,1)"}}}})));var f=function(){var e=j();return Object(o.jsxs)("div",{className:e.content,children:[Object(o.jsx)("div",{className:e.welcomeTitle,children:"Welcome to Talk To Me"}),Object(o.jsx)("div",{className:e.welcomeMessage,children:"The purpose of this site is to provide a wholesome, anonymous chat service with the aim of combating the loneliness of quarantine."}),Object(o.jsx)("div",{className:e.welcomeMessage,children:"We are currently under construction as our frontend is undergoing major changes, so stay tuned!"}),Object(o.jsx)(l.a,{variant:"contained",className:e.chatButton,component:u.b,to:"/chat",children:"Chat"})]})},h=n(21),x=n(164),m=n(167),O=n(43),w=n.n(O),v=n(168),k=Object(r.a)((function(e){return{root:{background:"#FEFEFE",color:"#333",width:"400px",height:"600px","border-radius":"5px","font-weight":"bold","font-size":"32pt",display:"flex","flex-direction":"column"},messages:{flex:"1 1 auto",display:"flex","flex-direction":"column","font-size":"14pt",padding:"10px",overflow:"scroll"},myMessage:{margin:"4px",background:"#361999",display:"inline-flex","align-self":"flex-end",color:"white",padding:"12px","border-radius":"10px"},theirMessage:{margin:"4px",background:"#DDD",display:"inline-flex","align-self":"flex-start",color:"black",padding:"12px","border-radius":"10px"},inputBox:{padding:"5px"}}}));var M=function(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),c=(n[0],n[1],k());console.log(e);var s=e.messages;return Object(o.jsxs)(x.a,{className:c.root,children:[Object(o.jsx)("div",{className:c.messages,children:s.map((function(e){return Object(o.jsx)("div",{className:e.incoming?c.theirMessage:c.myMessage,children:e.content},e.id)}))}),Object(o.jsx)(m.a,{className:c.inputBox,placeholder:"Send a message!",variant:"outlined",onKeyDown:function(t){"Enter"==t.key&&(console.log(t.target.value),function(t){var n={message_id:Object(v.a)(),user_id:e.user_id,secret:e.secret,content:t};console.log(n),e.setMessages(s.concat([n])),w.a.post(e.api_url+"/messages",n)}(t.target.value),t.target.value="")}})]})},N=n(78),y=n.n(N),T=Object(r.a)((function(e){return{root:{margin:"80px",color:"white","font-weight":"bold","font-size":"32pt"},title:{color:"#ffa740",width:"900px"},waitMessage:{}}})),_="https://api.talk-to-me.co";var S=function(){var e=T(),t=Object(a.useState)("in"),n=Object(h.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(null),r=Object(h.a)(i,2),l=r[0],d=r[1],u=Object(a.useState)(null),p=Object(h.a)(u,2),g=p[0],b=p[1],j=Object(a.useState)([]),f=Object(h.a)(j,2),x=f[0],m=f[1],O=Object(a.useState)(null),v=Object(h.a)(O,2),k=v[0],N=v[1];return Object(a.useEffect)((function(){w.a.post(_+"/queue").then((function(e){N(y.a.connect(_,{origins:"http://localhost:8000",transports:["websocket"]})),d(e.data.data.id),b(e.data.data.secret),console.log(e.data.data.id,e.data.data.secret)}))}),[]),Object(a.useEffect)((function(){k&&g&&l&&(k.on("connect",(function(){k.emit("register_sid",g)})),k.on("queue_complete",(function(){console.log("queue complete"),k.emit("join_room",g),s("out")})),k.on("send_message_to_client",(function(e){m(x.concat([e]))})))}),[g,l,k,x]),Object(a.useEffect)((function(){console.log("rerendering with following messages:",x)}),[x]),Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)("div",{className:e.title,children:"Talk To Me"}),"out"===c?Object(o.jsx)(M,{messages:x,setMessages:m,user_id:l,secret:g,api_url:_}):Object(o.jsx)("div",{className:e.waitMessage,children:"You are now in queue..."})]})},z=Object(r.a)((function(e){return{root:{"font-family":"Roboto"},topbar:{width:"100%",height:"70px",background:"radial-gradient(circle, rgba(254,131,67,1) 0%, rgba(248,74,98,1) 100%)","border-radius":"2px",color:"white","padding-top":"10px","padding-bottom":"10px",display:"flex","justify-content":"space-between"},menuIcon:{"font-size":"30pt","margin-top":"14px","margin-left":"10px"},title:{textTransform:"none","padding-top":"5px",color:"white","font-weight":"900","font-size":"40pt"}}}));var E=function(){var e=z();return Object(o.jsxs)("div",{className:e.root,children:[Object(o.jsx)(d.a,{children:Object(o.jsx)("title",{children:"Talk To Me"})}),Object(o.jsxs)(u.a,{children:[Object(o.jsxs)("div",{className:e.topbar,children:[Object(o.jsx)(b.a,{className:e.menuIcon}),Object(o.jsx)(l.a,{className:e.title,component:u.b,to:"/",children:"Talk To Me"}),Object(o.jsx)("div",{})]}),Object(o.jsx)(p.a,{exact:!0,path:"/",children:Object(o.jsx)(f,{})}),Object(o.jsx)(p.a,{path:"/chat",children:Object(o.jsx)(S,{})})]})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,170)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),a(e),c(e),s(e)}))};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(E,{})}),document.getElementById("root")),F()},91:function(e,t,n){},94:function(e,t,n){}},[[147,1,2]]]);
//# sourceMappingURL=main.678f7a71.chunk.js.map